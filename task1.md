# Проектирование архитектур программного обеспечения
### Постановка задачи

### 1. Описание назначения проектируемой системы
Система игровой площадки. Клиенты заходят в систему и играют с другими клиентами в матчах. 
В качестве ставки принимается предметы клиента из Торговой площадки Steam. 
В системе предметы оцениваются по стоимости и клиент получает денежный эквивалент. 
Победитель определяется случайным образом и получает денежный эквивалент, увеличенный в 2 или 14 раз(взависимости от ставки). 

### 2. Функциональные требования (текстовое описание Участников и их Интересов)
* Клиент – Отдаёт системе предметы, получает предметы. Играет матчи (выигрывает или проигрывают), смотрит рекламу во время матча.
* Система -  Проводит матчи и выбирает победителя. Матчи основаны на случайном выпадении числа. Клиент, угадавший число увеличивает поставленный эквивалент. 
* Steam – содержит инвентарь пользователей, регулирует стоимость предметов, отправляет коды авторизации.
* Бот - роботизированный клиент, работающий на систему. Хранит предметы отданные пользователями.

### 3. Описание бизнес-процессов (этапы, Участники, вовлеченные Сущности)
	1. Проведение матча – 
		Клиенты заходят в матч, делают свой выбор на победу. Далее случайным образом выбирается число. Игроки, угадавшие результат получают увеличенный в n-раз денежный эквивалент.
	2. Ввод клиентом предметов в систему и получение им эквивалента. 
		Для этого происходит авторизация в система через Steam, затем клиент выбирает предметы для отправки. Система проверяет стоимость предметов(стоимость не должна быть ниже 0,5$), в случае отсутствия нарушений, предметы принимает Бот в свой инвентарь,
		а клиент получает эквивалент в Системе.
	3. Вывод предметов – 
		Для этого происходит авторизация в система через Steam. После чего система опрашивает инвентарь ботов и составляет список доступных предметов. Далее идёт образение в Steam за стоимостью предметов. После получения стоимость переводится в эквивалент,
		и клиент может выбирать предметы для вывода в свой инвентарь. Система проверяет наличие этих предметов и соответствие стоимости. Затем система отправлюет запрос боту на отправку предметов. Клиент подтверждает сделку и получает предметы.

## Варианты использования
Диаграмма прецедентов

![use-case](https://github.com/.../UML.png)



### Ввод предметов
1. Авторизация клиента через Steam
2. Клиент просматривает инвертарь и выбирает предметы для ввода в систему
3. Проверка стоимости предметов.
4. Клиент подтверждает сделку.
5. Система активирует бота и ожидает подтверждения принятия предметов клиента
6. После подтверждения клиенту выдаётся эквивалент.

Альтернатива: Неудача из-за отсутствия защиты аккаунта Клиента
1. от Steam не получен положительный ответ авторизации
2. На аккаунте клиента не установлен Steam Guard

Альтернатива: Клиент не подтвердил сделку
4. отказ от сделки

### Вывод предметов
1. Авторизация клиента через Steam
2. Клиент просматривает и выбирает доступные предметы для вывода
3. Проверка стоимости предметов, затем бот инициирует сделку.
4. Клиент подтверждает сделку.
5. Клиенту переведены предметы.


Альтернатива: Клиент не подтвердил сделку
4. отказ от сделки

### Проведение матча от лица Клиента
1. Авторизация клиента через Steam
2. Клиент вибирает случайное число 7 (числа имеют диапазон от 0 до 15).
3. Клиент вносит в матч эквивалент.
4. Система выдала число 7.
5. Клиент получает эквивалент, увеличенный в 2 раза.

Альтернатива: Клиент не угадал
4. Через 20 секунд Система выдала число 6.
5. Клиент не получает ничего.


### Проведение матча от лица Системы
1. Система генерирует два случайных 8-ми значных ключа. Один публичный, второй закрытый. Из закрытого ключа Система вычисляет Hash
2. На основе открытого ключа, хэша закрытого ключа и номера матча вычисляется второй Hash. Из него берутся первые 8 цифр, переводятся в dec и вычисляется остаток от деления на 15.
3. Включается таймер на 25 секунд.
4. Ожидание клиентов и их ставок.
5. Таймер закончился.
6. Система выдает результат 7.
7. Угадавшим клентам увеличивается эквивалент.


### Варианты использования системы  Внешним сервисом
Информация о клиенте через Steam.
